import type { User, Ledger, Transaction, Asset, AssetLog } from '@/types'

// 현재 사용자 (더미)
export const mockUser: User = {
  id: 'user-1',
  email: 'user@example.com',
  name: '김철수',
  profileImage: 'https://api.dicebear.com/7.x/avataaars/svg?seed=user1',
  createdAt: new Date('2024-01-01'),
}

// 가계부 목록 (더미)
export const mockLedgers: Ledger[] = [
  {
    id: 'ledger-1',
    name: '개인 가계부',
    description: '나의 개인 지출 관리',
    currency: 'KRW',
    ownerId: 'user-1',
    members: [
      {
        userId: 'user-1',
        email: 'user@example.com',
        name: '김철수',
        role: 'owner',
        joinedAt: new Date('2024-01-01'),
      },
    ],
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-11-25'),
  },
  {
    id: 'ledger-2',
    name: '가족 가계부',
    description: '우리 가족 공동 가계부',
    currency: 'KRW',
    ownerId: 'user-1',
    members: [
      {
        userId: 'user-1',
        email: 'user@example.com',
        name: '김철수',
        role: 'owner',
        joinedAt: new Date('2024-01-01'),
      },
      {
        userId: 'user-2',
        email: 'partner@example.com',
        name: '이영희',
        role: 'editor',
        joinedAt: new Date('2024-01-05'),
      },
    ],
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-11-25'),
  },
]

// 거래 내역 (더미 - 최근 3개월)
export const mockTransactions: Transaction[] = [
  // 11월 거래
  {
    id: 'trans-1',
    ledgerId: 'ledger-1',
    type: 'income',
    amount: 3500000,
    date: new Date('2024-11-01'),
    category1: '급여소득',
    category2: '월급',
    description: '11월 급여',
    createdAt: new Date('2024-11-01'),
    createdBy: 'user-1',
  },
  {
    id: 'trans-2',
    ledgerId: 'ledger-1',
    type: 'expense',
    amount: 800000,
    date: new Date('2024-11-01'),
    category1: '주거/통신',
    category2: '월세/관리비',
    paymentMethod1: '계좌이체',
    paymentMethod2: '은행 이체',
    description: '11월 월세',
    createdAt: new Date('2024-11-01'),
    createdBy: 'user-1',
  },
  {
    id: 'trans-3',
    ledgerId: 'ledger-1',
    type: 'expense',
    amount: 150000,
    date: new Date('2024-11-05'),
    category1: '주거/통신',
    category2: '공과금',
    paymentMethod1: '계좌이체',
    paymentMethod2: '은행 이체',
    description: '전기/수도/가스',
    createdAt: new Date('2024-11-05'),
    createdBy: 'user-1',
  },
  {
    id: 'trans-4',
    ledgerId: 'ledger-1',
    type: 'expense',
    amount: 45000,
    date: new Date('2024-11-07'),
    category1: '식비',
    category2: '외식',
    paymentMethod1: '신용카드',
    paymentMethod2: '신한',
    description: '회식',
    memo: '부서 회식',
    createdAt: new Date('2024-11-07'),
    createdBy: 'user-1',
  },
  {
    id: 'trans-5',
    ledgerId: 'ledger-1',
    type: 'expense',
    amount: 8500,
    date: new Date('2024-11-08'),
    category1: '식비',
    category2: '카페/디저트',
    paymentMethod1: '신용카드',
    paymentMethod2: '신한',
    description: '스타벅스',
    createdAt: new Date('2024-11-08'),
    createdBy: 'user-1',
  },
  {
    id: 'trans-6',
    ledgerId: 'ledger-1',
    type: 'expense',
    amount: 120000,
    date: new Date('2024-11-10'),
    category1: '식비',
    category2: '장보기',
    paymentMethod1: '신용카드',
    paymentMethod2: '신한',
    description: '마트 장보기',
    createdAt: new Date('2024-11-10'),
    createdBy: 'user-1',
  },
  {
    id: 'trans-7',
    ledgerId: 'ledger-1',
    type: 'expense',
    amount: 3500,
    date: new Date('2024-11-12'),
    category1: '교통',
    category2: '대중교통',
    paymentMethod1: '간편결제',
    paymentMethod2: '카카오페이',
    description: '지하철',
    createdAt: new Date('2024-11-12'),
    createdBy: 'user-1',
  },
  {
    id: 'trans-8',
    ledgerId: 'ledger-1',
    type: 'expense',
    amount: 28000,
    date: new Date('2024-11-15'),
    category1: '식비',
    category2: '배달',
    paymentMethod1: '신용카드',
    paymentMethod2: '신한',
    description: '치킨 배달',
    createdAt: new Date('2024-11-15'),
    createdBy: 'user-1',
  },
  {
    id: 'trans-9',
    ledgerId: 'ledger-1',
    type: 'expense',
    amount: 15000,
    date: new Date('2024-11-18'),
    category1: '문화/여가',
    category2: '영화/공연',
    paymentMethod1: '신용카드',
    paymentMethod2: '신한',
    description: '영화 관람',
    createdAt: new Date('2024-11-18'),
    createdBy: 'user-1',
  },
  {
    id: 'trans-10',
    ledgerId: 'ledger-1',
    type: 'expense',
    amount: 65000,
    date: new Date('2024-11-20'),
    category1: '생활',
    category2: '의류',
    paymentMethod1: '신용카드',
    paymentMethod2: '신한',
    description: '겨울 옷',
    createdAt: new Date('2024-11-20'),
    createdBy: 'user-1',
  },
  {
    id: 'trans-11',
    ledgerId: 'ledger-1',
    type: 'expense',
    amount: 12000,
    date: new Date('2024-11-22'),
    category1: '문화/여가',
    category2: '구독 서비스',
    paymentMethod1: '신용카드',
    paymentMethod2: '신한',
    description: 'Netflix',
    createdAt: new Date('2024-11-22'),
    createdBy: 'user-1',
  },
  {
    id: 'trans-12',
    ledgerId: 'ledger-1',
    type: 'expense',
    amount: 35000,
    date: new Date('2024-11-23'),
    category1: '식비',
    category2: '외식',
    paymentMethod1: '신용카드',
    paymentMethod2: '신한',
    description: '저녁 식사',
    createdAt: new Date('2024-11-23'),
    createdBy: 'user-1',
  },
  // 10월 거래 (일부)
  {
    id: 'trans-13',
    ledgerId: 'ledger-1',
    type: 'income',
    amount: 3500000,
    date: new Date('2024-10-01'),
    category1: '급여소득',
    category2: '월급',
    description: '10월 급여',
    createdAt: new Date('2024-10-01'),
    createdBy: 'user-1',
  },
  {
    id: 'trans-14',
    ledgerId: 'ledger-1',
    type: 'expense',
    amount: 800000,
    date: new Date('2024-10-01'),
    category1: '주거/통신',
    category2: '월세/관리비',
    paymentMethod1: '계좌이체',
    paymentMethod2: '은행 이체',
    description: '10월 월세',
    createdAt: new Date('2024-10-01'),
    createdBy: 'user-1',
  },
  {
    id: 'trans-15',
    ledgerId: 'ledger-1',
    type: 'expense',
    amount: 145000,
    date: new Date('2024-10-05'),
    category1: '주거/통신',
    category2: '공과금',
    paymentMethod1: '계좌이체',
    paymentMethod2: '은행 이체',
    description: '전기/수도/가스',
    createdAt: new Date('2024-10-05'),
    createdBy: 'user-1',
  },
  // 9월 거래 (일부)
  {
    id: 'trans-16',
    ledgerId: 'ledger-1',
    type: 'income',
    amount: 3500000,
    date: new Date('2024-09-01'),
    category1: '급여소득',
    category2: '월급',
    description: '9월 급여',
    createdAt: new Date('2024-09-01'),
    createdBy: 'user-1',
  },
  {
    id: 'trans-17',
    ledgerId: 'ledger-1',
    type: 'expense',
    amount: 800000,
    date: new Date('2024-09-01'),
    category1: '주거/통신',
    category2: '월세/관리비',
    paymentMethod1: '계좌이체',
    paymentMethod2: '은행 이체',
    description: '9월 월세',
    createdAt: new Date('2024-09-01'),
    createdBy: 'user-1',
  },
]

// 자산 (더미)
export const mockAssets: Asset[] = [
  {
    id: 'asset-1',
    ledgerId: 'ledger-1',
    name: '신한은행 입출금',
    category1: '현금성자산',
    category2: '입출금 계좌',
    balance: 2500000,
    currency: 'KRW',
    isActive: true,
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-11-25'),
    createdBy: 'user-1',
  },
  {
    id: 'asset-2',
    ledgerId: 'ledger-1',
    name: '국민은행 적금',
    category1: '현금성자산',
    category2: '저축 예금',
    balance: 15000000,
    currency: 'KRW',
    isActive: true,
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-11-25'),
    createdBy: 'user-1',
  },
  {
    id: 'asset-3',
    ledgerId: 'ledger-1',
    name: '삼성증권 계좌',
    category1: '투자자산',
    category2: '주식',
    balance: 8500000,
    currency: 'KRW',
    memo: '삼성전자, SK하이닉스',
    isActive: true,
    createdAt: new Date('2024-03-01'),
    updatedAt: new Date('2024-11-25'),
    createdBy: 'user-1',
  },
  {
    id: 'asset-4',
    ledgerId: 'ledger-1',
    name: '신한카드 체크',
    category1: '부채',
    category2: '신용카드',
    balance: -450000,
    currency: 'KRW',
    memo: '이번 달 사용액',
    isActive: true,
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-11-25'),
    createdBy: 'user-1',
  },
  {
    id: 'asset-5',
    ledgerId: 'ledger-1',
    name: '학자금 대출',
    category1: '부채',
    category2: '대출',
    balance: -5000000,
    currency: 'KRW',
    isActive: true,
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date('2024-11-25'),
    createdBy: 'user-1',
  },
]

// 자산 로그 (더미)
export const mockAssetLogs: AssetLog[] = [
  {
    id: 'log-1',
    assetId: 'asset-1',
    ledgerId: 'ledger-1',
    type: 'created',
    newBalance: 0,
    description: '신한은행 입출금 계좌 생성',
    createdAt: new Date('2024-01-01'),
    createdBy: 'user-1',
  },
  {
    id: 'log-2',
    assetId: 'asset-1',
    ledgerId: 'ledger-1',
    type: 'balance_changed',
    previousBalance: 0,
    newBalance: 3000000,
    description: '초기 입금',
    createdAt: new Date('2024-01-05'),
    createdBy: 'user-1',
  },
  {
    id: 'log-3',
    assetId: 'asset-1',
    ledgerId: 'ledger-1',
    type: 'balance_changed',
    previousBalance: 3000000,
    newBalance: 2500000,
    description: '지출로 인한 잔액 변경',
    createdAt: new Date('2024-11-20'),
    createdBy: 'user-1',
  },
  {
    id: 'log-4',
    assetId: 'asset-2',
    ledgerId: 'ledger-1',
    type: 'created',
    newBalance: 0,
    description: '국민은행 적금 계좌 생성',
    createdAt: new Date('2024-01-01'),
    createdBy: 'user-1',
  },
  {
    id: 'log-5',
    assetId: 'asset-2',
    ledgerId: 'ledger-1',
    type: 'balance_changed',
    previousBalance: 0,
    newBalance: 15000000,
    description: '적금 입금',
    createdAt: new Date('2024-01-10'),
    createdBy: 'user-1',
  },
  {
    id: 'log-6',
    assetId: 'asset-3',
    ledgerId: 'ledger-1',
    type: 'created',
    newBalance: 0,
    description: '삼성증권 계좌 생성',
    createdAt: new Date('2024-03-01'),
    createdBy: 'user-1',
  },
  {
    id: 'log-7',
    assetId: 'asset-3',
    ledgerId: 'ledger-1',
    type: 'balance_changed',
    previousBalance: 0,
    newBalance: 10000000,
    description: '주식 투자 시작',
    createdAt: new Date('2024-03-05'),
    createdBy: 'user-1',
  },
  {
    id: 'log-8',
    assetId: 'asset-3',
    ledgerId: 'ledger-1',
    type: 'balance_changed',
    previousBalance: 10000000,
    newBalance: 8500000,
    description: '주식 평가액 변동',
    createdAt: new Date('2024-11-15'),
    createdBy: 'user-1',
  },
  {
    id: 'log-9',
    assetId: 'asset-4',
    ledgerId: 'ledger-1',
    type: 'created',
    newBalance: 0,
    description: '신한카드 체크카드 등록',
    createdAt: new Date('2024-01-01'),
    createdBy: 'user-1',
  },
  {
    id: 'log-10',
    assetId: 'asset-4',
    ledgerId: 'ledger-1',
    type: 'balance_changed',
    previousBalance: 0,
    newBalance: -450000,
    description: '이번 달 카드 사용액',
    createdAt: new Date('2024-11-25'),
    createdBy: 'user-1',
  },
  {
    id: 'log-11',
    assetId: 'asset-5',
    ledgerId: 'ledger-1',
    type: 'created',
    newBalance: -5000000,
    description: '학자금 대출 등록',
    createdAt: new Date('2024-01-01'),
    createdBy: 'user-1',
  },
]

// 통계용 데이터 (집계 결과)
export const getMonthlySummary = (ledgerId: string, year: number, month: number) => {
  const transactions = mockTransactions.filter(
    (t) =>
      t.ledgerId === ledgerId && t.date.getFullYear() === year && t.date.getMonth() === month - 1
  )

  const income = transactions
    .filter((t) => t.type === 'income')
    .reduce((sum, t) => sum + t.amount, 0)

  const expense = transactions
    .filter((t) => t.type === 'expense')
    .reduce((sum, t) => sum + t.amount, 0)

  return {
    income,
    expense,
    balance: income - expense,
  }
}

// 카테고리별 지출 통계
export const getExpenseByCategory = (ledgerId: string, year: number, month: number) => {
  const transactions = mockTransactions.filter(
    (t) =>
      t.ledgerId === ledgerId &&
      t.type === 'expense' &&
      t.date.getFullYear() === year &&
      t.date.getMonth() === month - 1
  )

  const categoryMap = new Map<string, number>()

  transactions.forEach((t) => {
    const current = categoryMap.get(t.category1) || 0
    categoryMap.set(t.category1, current + t.amount)
  })

  return Array.from(categoryMap.entries())
    .map(([category, amount]) => ({ category, amount }))
    .sort((a, b) => b.amount - a.amount)
}
